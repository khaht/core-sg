4559c868cdb6f327b4863447ae2b5bef
const loadFiles = require('./files.load');

const requireFileAndParse = require('./require-file-parse');

const checkReservedFilename = require('./check-reserved-filename');
/**
 * @param {string} dir - directory from which to load configs
 * @param {string} pattern - glob pattern to search for config files
 */


const loadConfigFiles = (dir, pattern = 'config/**/*.+(js|json)') => loadFiles(dir, pattern, {
  requireFn: requireFileAndParse,
  shouldUseFileNameAsKey: checkReservedFilename,
  globArgs: {
    // used to load .init.json at first startup
    dot: true,
    ignore: ['config/**/*.test.js']
  }
});

module.exports = loadConfigFiles;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy1maWxlcy5sb2FkLmpzIl0sIm5hbWVzIjpbImxvYWRGaWxlcyIsInJlcXVpcmUiLCJyZXF1aXJlRmlsZUFuZFBhcnNlIiwiY2hlY2tSZXNlcnZlZEZpbGVuYW1lIiwibG9hZENvbmZpZ0ZpbGVzIiwiZGlyIiwicGF0dGVybiIsInJlcXVpcmVGbiIsInNob3VsZFVzZUZpbGVOYW1lQXNLZXkiLCJnbG9iQXJncyIsImRvdCIsImlnbm9yZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFNBQVMsR0FBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBekI7O0FBQ0EsTUFBTUMsbUJBQW1CLEdBQUdELE9BQU8sQ0FBQyxzQkFBRCxDQUFuQzs7QUFDQSxNQUFNRSxxQkFBcUIsR0FBR0YsT0FBTyxDQUFDLDJCQUFELENBQXJDO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBLE1BQU1HLGVBQWUsR0FBRyxDQUFDQyxHQUFELEVBQU1DLE9BQU8sR0FBRyx3QkFBaEIsS0FBNkNOLFNBQVMsQ0FBQ0ssR0FBRCxFQUFNQyxPQUFOLEVBQWU7QUFDM0ZDLEVBQUFBLFNBQVMsRUFBRUwsbUJBRGdGO0FBRTNGTSxFQUFBQSxzQkFBc0IsRUFBRUwscUJBRm1FO0FBRzNGTSxFQUFBQSxRQUFRLEVBQUU7QUFDUjtBQUNBQyxJQUFBQSxHQUFHLEVBQUUsSUFGRztBQUdSQyxJQUFBQSxNQUFNLEVBQUUsQ0FBQyxxQkFBRDtBQUhBO0FBSGlGLENBQWYsQ0FBOUU7O0FBVUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlQsZUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBsb2FkRmlsZXMgPSByZXF1aXJlKCcuL2ZpbGVzLmxvYWQnKTtcbmNvbnN0IHJlcXVpcmVGaWxlQW5kUGFyc2UgPSByZXF1aXJlKCcuL3JlcXVpcmUtZmlsZS1wYXJzZScpO1xuY29uc3QgY2hlY2tSZXNlcnZlZEZpbGVuYW1lID0gcmVxdWlyZSgnLi9jaGVjay1yZXNlcnZlZC1maWxlbmFtZScpO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXIgLSBkaXJlY3RvcnkgZnJvbSB3aGljaCB0byBsb2FkIGNvbmZpZ3NcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXR0ZXJuIC0gZ2xvYiBwYXR0ZXJuIHRvIHNlYXJjaCBmb3IgY29uZmlnIGZpbGVzXG4gKi9cbmNvbnN0IGxvYWRDb25maWdGaWxlcyA9IChkaXIsIHBhdHRlcm4gPSAnY29uZmlnLyoqLyouKyhqc3xqc29uKScpID0+IGxvYWRGaWxlcyhkaXIsIHBhdHRlcm4sIHtcbiAgcmVxdWlyZUZuOiByZXF1aXJlRmlsZUFuZFBhcnNlLFxuICBzaG91bGRVc2VGaWxlTmFtZUFzS2V5OiBjaGVja1Jlc2VydmVkRmlsZW5hbWUsXG4gIGdsb2JBcmdzOiB7XG4gICAgLy8gdXNlZCB0byBsb2FkIC5pbml0Lmpzb24gYXQgZmlyc3Qgc3RhcnR1cFxuICAgIGRvdDogdHJ1ZSxcbiAgICBpZ25vcmU6IFsnY29uZmlnLyoqLyoudGVzdC5qcyddLFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbG9hZENvbmZpZ0ZpbGVzO1xuIl19