{"version":3,"sources":["api.load.js"],"names":["join","require","existsSync","_","loadFiles","loadConfig","module","exports","dir","apiDir","Error","apis","apiConfigs","merge"],"mappings":"AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAWC,OAAO,CAAC,MAAD,CAAxB;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAiBD,OAAO,CAAC,UAAD,CAA9B;;AACA,MAAME,CAAC,GAAGF,OAAO,CAAC,QAAD,CAAjB;;AACA,MAAMG,SAAS,GAAGH,OAAO,CAAC,cAAD,CAAzB;;AACA,MAAMI,UAAU,GAAGJ,OAAO,CAAC,qBAAD,CAA1B;;AAEAK,MAAM,CAACC,OAAP,GAAiB,OAAO;AAAEC,EAAAA;AAAF,CAAP,KAAmB;AAClC,QAAMC,MAAM,GAAGT,IAAI,CAACQ,GAAD,EAAM,SAAN,CAAnB;;AAEA,MAAI,CAACN,UAAU,CAACO,MAAD,CAAf,EAAyB;AACvB,UAAM,IAAIC,KAAJ,CAAU,0EAAV,CAAN;AACD;;AAED,QAAMC,IAAI,GAAG,MAAMP,SAAS,CAACK,MAAD,EAAS,6BAAT,CAA5B;AACA,QAAMG,UAAU,GAAG,MAAMP,UAAU,CAACI,MAAD,EAAS,0BAAT,CAAnC;AAEA,SAAON,CAAC,CAACU,KAAF,CAAQF,IAAR,EAAcC,UAAd,CAAP;AACD,CAXD","sourcesContent":["const { join } = require('path');\nconst { existsSync } = require('fs-extra');\nconst _ = require('lodash');\nconst loadFiles = require('./files.load');\nconst loadConfig = require('./config-files.load');\n\nmodule.exports = async ({ dir }) => {\n  const apiDir = join(dir, 'modules');\n\n  if (!existsSync(apiDir)) {\n    throw new Error('Missing \\'modules\\' folder. Please create one in your app root directory');\n  }\n\n  const apis = await loadFiles(apiDir, '*/!(config)/**/*.*(js|json)');\n  const apiConfigs = await loadConfig(apiDir, '*/config/**/*.*(js|json)');\n\n  return _.merge(apis, apiConfigs);\n};\n"]}