9f1b58c7ce8542fe0ed8d16b4222ca4e
const path = require('path');

const fse = require('fs-extra');

const apiLoad = require('../api.load');

const _ = require('lodash');

describe('API load', () => {
  test('Should throw error if not exist module', async () => {
    await apiLoad({
      dir: 'test'
    }).catch(e => expect(e.message).toEqual("Missing 'modules' folder. Please create one in your app root directory"));
  });
  test('Should return api load', async () => {
    const names = [];
    const paths = fse.readdirSync(path.resolve(process.cwd(), 'modules'), {
      withFileTypes: true
    });

    for (let fd of paths) {
      fd.name !== '__tests__' ? names.push(fd.name) : null;
    }

    const resp = await apiLoad({
      dir: process.cwd()
    });
    expect(Object.keys(resp)).toEqual(names);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwaS5sb2FkLnRlc3QuanMiXSwibmFtZXMiOlsicGF0aCIsInJlcXVpcmUiLCJmc2UiLCJhcGlMb2FkIiwiXyIsImRlc2NyaWJlIiwidGVzdCIsImRpciIsImNhdGNoIiwiZSIsImV4cGVjdCIsIm1lc3NhZ2UiLCJ0b0VxdWFsIiwibmFtZXMiLCJwYXRocyIsInJlYWRkaXJTeW5jIiwicmVzb2x2ZSIsInByb2Nlc3MiLCJjd2QiLCJ3aXRoRmlsZVR5cGVzIiwiZmQiLCJuYW1lIiwicHVzaCIsInJlc3AiLCJPYmplY3QiLCJrZXlzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUNBLE1BQU1DLEdBQUcsR0FBR0QsT0FBTyxDQUFDLFVBQUQsQ0FBbkI7O0FBQ0EsTUFBTUUsT0FBTyxHQUFHRixPQUFPLENBQUMsYUFBRCxDQUF2Qjs7QUFDQSxNQUFNRyxDQUFDLEdBQUdILE9BQU8sQ0FBQyxRQUFELENBQWpCOztBQUVBSSxRQUFRLENBQUMsVUFBRCxFQUFhLE1BQU07QUFDekJDLEVBQUFBLElBQUksQ0FBQyx3Q0FBRCxFQUEyQyxZQUFZO0FBQ3pELFVBQU1ILE9BQU8sQ0FBQztBQUFFSSxNQUFBQSxHQUFHLEVBQUU7QUFBUCxLQUFELENBQVAsQ0FBeUJDLEtBQXpCLENBQWdDQyxDQUFELElBQ25DQyxNQUFNLENBQUNELENBQUMsQ0FBQ0UsT0FBSCxDQUFOLENBQWtCQyxPQUFsQixDQUNFLHdFQURGLENBREksQ0FBTjtBQUtELEdBTkcsQ0FBSjtBQVFBTixFQUFBQSxJQUFJLENBQUMsd0JBQUQsRUFBMkIsWUFBWTtBQUN6QyxVQUFNTyxLQUFLLEdBQUcsRUFBZDtBQUNBLFVBQU1DLEtBQUssR0FBR1osR0FBRyxDQUFDYSxXQUFKLENBQWdCZixJQUFJLENBQUNnQixPQUFMLENBQWFDLE9BQU8sQ0FBQ0MsR0FBUixFQUFiLEVBQTRCLFNBQTVCLENBQWhCLEVBQXdEO0FBQ3BFQyxNQUFBQSxhQUFhLEVBQUU7QUFEcUQsS0FBeEQsQ0FBZDs7QUFHQSxTQUFLLElBQUlDLEVBQVQsSUFBZU4sS0FBZixFQUFzQjtBQUNwQk0sTUFBQUEsRUFBRSxDQUFDQyxJQUFILEtBQVksV0FBWixHQUEwQlIsS0FBSyxDQUFDUyxJQUFOLENBQVdGLEVBQUUsQ0FBQ0MsSUFBZCxDQUExQixHQUFnRCxJQUFoRDtBQUNEOztBQUNELFVBQU1FLElBQUksR0FBRyxNQUFNcEIsT0FBTyxDQUFDO0FBQUVJLE1BQUFBLEdBQUcsRUFBRVUsT0FBTyxDQUFDQyxHQUFSO0FBQVAsS0FBRCxDQUExQjtBQUNBUixJQUFBQSxNQUFNLENBQUNjLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZRixJQUFaLENBQUQsQ0FBTixDQUEwQlgsT0FBMUIsQ0FBa0NDLEtBQWxDO0FBQ0QsR0FWRyxDQUFKO0FBV0QsQ0FwQk8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCBmc2UgPSByZXF1aXJlKCdmcy1leHRyYScpO1xuY29uc3QgYXBpTG9hZCA9IHJlcXVpcmUoJy4uL2FwaS5sb2FkJyk7XG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbmRlc2NyaWJlKCdBUEkgbG9hZCcsICgpID0+IHtcbiAgdGVzdCgnU2hvdWxkIHRocm93IGVycm9yIGlmIG5vdCBleGlzdCBtb2R1bGUnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgYXBpTG9hZCh7IGRpcjogJ3Rlc3QnIH0pLmNhdGNoKChlKSA9PlxuICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG9FcXVhbChcbiAgICAgICAgXCJNaXNzaW5nICdtb2R1bGVzJyBmb2xkZXIuIFBsZWFzZSBjcmVhdGUgb25lIGluIHlvdXIgYXBwIHJvb3QgZGlyZWN0b3J5XCJcbiAgICAgIClcbiAgICApO1xuICB9KTtcblxuICB0ZXN0KCdTaG91bGQgcmV0dXJuIGFwaSBsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG5hbWVzID0gW107XG4gICAgY29uc3QgcGF0aHMgPSBmc2UucmVhZGRpclN5bmMocGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICdtb2R1bGVzJyksIHtcbiAgICAgIHdpdGhGaWxlVHlwZXM6IHRydWUsXG4gICAgfSk7XG4gICAgZm9yIChsZXQgZmQgb2YgcGF0aHMpIHtcbiAgICAgIGZkLm5hbWUgIT09ICdfX3Rlc3RzX18nID8gbmFtZXMucHVzaChmZC5uYW1lKSA6IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBhcGlMb2FkKHsgZGlyOiBwcm9jZXNzLmN3ZCgpIH0pO1xuICAgIGV4cGVjdChPYmplY3Qua2V5cyhyZXNwKSkudG9FcXVhbChuYW1lcyk7XG4gIH0pO1xufSk7XG4iXX0=