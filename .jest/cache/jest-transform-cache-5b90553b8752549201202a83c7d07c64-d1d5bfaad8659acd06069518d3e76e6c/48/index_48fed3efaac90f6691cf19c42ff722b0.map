{"version":3,"sources":["index.js"],"names":["_","require","createController","createService","createCoreApi","api","model","sgApp","modelName","apiService","get","apiController","service","Object","assign","controller","module","exports"],"mappings":"AAAA;AACA;AACA;AAEA,MAAMA,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAjB;;AAEA,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,cAAD,CAAhC;;AACA,MAAME,aAAa,GAAGF,OAAO,CAAC,WAAD,CAA7B;AAEA;AACA;AACA;;;AACA,SAASG,aAAT,CAAuB;AAAEC,EAAAA,GAAF;AAAOC,EAAAA,KAAP;AAAcC,EAAAA;AAAd,CAAvB,EAA8C;AAC5C,QAAM;AAAEC,IAAAA;AAAF,MAAgBF,KAAtB,CAD4C,CAG5C;;AACA,QAAMG,UAAU,GAAGT,CAAC,CAACU,GAAF,CAAML,GAAN,EAAW,CAAC,UAAD,EAAaG,SAAb,CAAX,EAAoC,EAApC,CAAnB;;AACA,QAAMG,aAAa,GAAGX,CAAC,CAACU,GAAF,CAAML,GAAN,EAAW,CAAC,aAAD,EAAgBG,SAAhB,CAAX,EAAuC,EAAvC,CAAtB;;AAEA,QAAMI,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAcX,aAAa,CAAC;AAAEG,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAD,CAA3B,EAA+CE,UAA/C,CAAhB;AAEA,QAAMM,UAAU,GAAGF,MAAM,CAACC,MAAP,CAAcZ,gBAAgB,CAAC;AAAEU,IAAAA,OAAF;AAAWN,IAAAA;AAAX,GAAD,CAA9B,EAAoDK,aAApD,CAAnB;AAEA,SAAO;AACLC,IAAAA,OADK;AAELG,IAAAA;AAFK,GAAP;AAID;;AAEDC,MAAM,CAACC,OAAP,GAAiB;AACfb,EAAAA;AADe,CAAjB","sourcesContent":["/**\n * Core API\n */\n\nconst _ = require('lodash');\n\nconst createController = require('./controller');\nconst createService = require('./service');\n\n/**\n * Returns a service and a controller built based on the content type passed\n */\nfunction createCoreApi({ api, model, sgApp }) {\n  const { modelName } = model;\n\n  // find corresponding service and controller\n  const apiService = _.get(api, ['services', modelName], {});\n  const apiController = _.get(api, ['controllers', modelName], {});\n\n  const service = Object.assign(createService({ model, sgApp }), apiService);\n\n  const controller = Object.assign(createController({ service, model }), apiController);\n\n  return {\n    service,\n    controller,\n  };\n}\n\nmodule.exports = {\n  createCoreApi,\n};\n"]}