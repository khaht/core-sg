350157ae464464cad35f3b3b4b8950d9
/**
 * Core API
 */
const _ = require('lodash');

const createController = require('./controller');

const createService = require('./service');
/**
 * Returns a service and a controller built based on the content type passed
 */


function createCoreApi({
  api,
  model,
  sgApp
}) {
  const {
    modelName
  } = model; // find corresponding service and controller

  const apiService = _.get(api, ['services', modelName], {});

  const apiController = _.get(api, ['controllers', modelName], {});

  const service = Object.assign(createService({
    model,
    sgApp
  }), apiService);
  const controller = Object.assign(createController({
    service,
    model
  }), apiController);
  return {
    service,
    controller
  };
}

module.exports = {
  createCoreApi
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIl8iLCJyZXF1aXJlIiwiY3JlYXRlQ29udHJvbGxlciIsImNyZWF0ZVNlcnZpY2UiLCJjcmVhdGVDb3JlQXBpIiwiYXBpIiwibW9kZWwiLCJzZ0FwcCIsIm1vZGVsTmFtZSIsImFwaVNlcnZpY2UiLCJnZXQiLCJhcGlDb250cm9sbGVyIiwic2VydmljZSIsIk9iamVjdCIsImFzc2lnbiIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFFQSxNQUFNQSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxRQUFELENBQWpCOztBQUVBLE1BQU1DLGdCQUFnQixHQUFHRCxPQUFPLENBQUMsY0FBRCxDQUFoQzs7QUFDQSxNQUFNRSxhQUFhLEdBQUdGLE9BQU8sQ0FBQyxXQUFELENBQTdCO0FBRUE7QUFDQTtBQUNBOzs7QUFDQSxTQUFTRyxhQUFULENBQXVCO0FBQUVDLEVBQUFBLEdBQUY7QUFBT0MsRUFBQUEsS0FBUDtBQUFjQyxFQUFBQTtBQUFkLENBQXZCLEVBQThDO0FBQzVDLFFBQU07QUFBRUMsSUFBQUE7QUFBRixNQUFnQkYsS0FBdEIsQ0FENEMsQ0FHNUM7O0FBQ0EsUUFBTUcsVUFBVSxHQUFHVCxDQUFDLENBQUNVLEdBQUYsQ0FBTUwsR0FBTixFQUFXLENBQUMsVUFBRCxFQUFhRyxTQUFiLENBQVgsRUFBb0MsRUFBcEMsQ0FBbkI7O0FBQ0EsUUFBTUcsYUFBYSxHQUFHWCxDQUFDLENBQUNVLEdBQUYsQ0FBTUwsR0FBTixFQUFXLENBQUMsYUFBRCxFQUFnQkcsU0FBaEIsQ0FBWCxFQUF1QyxFQUF2QyxDQUF0Qjs7QUFFQSxRQUFNSSxPQUFPLEdBQUdDLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjWCxhQUFhLENBQUM7QUFBRUcsSUFBQUEsS0FBRjtBQUFTQyxJQUFBQTtBQUFULEdBQUQsQ0FBM0IsRUFBK0NFLFVBQS9DLENBQWhCO0FBRUEsUUFBTU0sVUFBVSxHQUFHRixNQUFNLENBQUNDLE1BQVAsQ0FBY1osZ0JBQWdCLENBQUM7QUFBRVUsSUFBQUEsT0FBRjtBQUFXTixJQUFBQTtBQUFYLEdBQUQsQ0FBOUIsRUFBb0RLLGFBQXBELENBQW5CO0FBRUEsU0FBTztBQUNMQyxJQUFBQSxPQURLO0FBRUxHLElBQUFBO0FBRkssR0FBUDtBQUlEOztBQUVEQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZmIsRUFBQUE7QUFEZSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29yZSBBUElcbiAqL1xuXG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbmNvbnN0IGNyZWF0ZUNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2NvbnRyb2xsZXInKTtcbmNvbnN0IGNyZWF0ZVNlcnZpY2UgPSByZXF1aXJlKCcuL3NlcnZpY2UnKTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSBhbmQgYSBjb250cm9sbGVyIGJ1aWx0IGJhc2VkIG9uIHRoZSBjb250ZW50IHR5cGUgcGFzc2VkXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNvcmVBcGkoeyBhcGksIG1vZGVsLCBzZ0FwcCB9KSB7XG4gIGNvbnN0IHsgbW9kZWxOYW1lIH0gPSBtb2RlbDtcblxuICAvLyBmaW5kIGNvcnJlc3BvbmRpbmcgc2VydmljZSBhbmQgY29udHJvbGxlclxuICBjb25zdCBhcGlTZXJ2aWNlID0gXy5nZXQoYXBpLCBbJ3NlcnZpY2VzJywgbW9kZWxOYW1lXSwge30pO1xuICBjb25zdCBhcGlDb250cm9sbGVyID0gXy5nZXQoYXBpLCBbJ2NvbnRyb2xsZXJzJywgbW9kZWxOYW1lXSwge30pO1xuXG4gIGNvbnN0IHNlcnZpY2UgPSBPYmplY3QuYXNzaWduKGNyZWF0ZVNlcnZpY2UoeyBtb2RlbCwgc2dBcHAgfSksIGFwaVNlcnZpY2UpO1xuXG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBPYmplY3QuYXNzaWduKGNyZWF0ZUNvbnRyb2xsZXIoeyBzZXJ2aWNlLCBtb2RlbCB9KSwgYXBpQ29udHJvbGxlcik7XG5cbiAgcmV0dXJuIHtcbiAgICBzZXJ2aWNlLFxuICAgIGNvbnRyb2xsZXIsXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVDb3JlQXBpLFxufTtcbiJdfQ==