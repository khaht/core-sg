0d7c6363bb614df979e06d8048549c63
const {
  join
} = require('path');

const fs = require('fs');

const path = require('path');

const fileParse = require('../require-file-parse');

const {
  removeDir
} = require('../../../tests/helper');

const getConfigDir = prefix => {
  const dir = process.cwd();
  const configDir = path.resolve(dir, prefix ? `${prefix}-config` : 'config');

  if (!fs.existsSync(configDir)) {
    fs.mkdirSync(configDir);
  }

  return configDir;
};

const testConfigDir = getConfigDir('test-require-file-parse');
describe('File parse', () => {
  const dir = process.cwd();
  afterAll(() => {
    removeDir(testConfigDir);
  });
  test('Should require database.js', () => {
    const filePath = join(dir, 'config', 'database.js');
    const resp = fileParse(filePath);
    expect(resp).toBeDefined();
    expect(typeof resp).toBe('function');
  });
  test('Should require serviceaccount.json', () => {
    const filePath = join(dir, 'firebase', 'serviceaccount.json');
    const resp = fileParse(filePath);
    expect(resp).toBeDefined();
    expect(typeof resp).toBe('object');
  });
  test('should require json file', () => {
    const jsonConfigFilePath = path.join(testConfigDir, 'hello.json');
    const helloConfig = {
      name: 'world'
    };
    fs.writeFileSync(jsonConfigFilePath, JSON.stringify(helloConfig));
    const configs = fileParse(jsonConfigFilePath);
    expect(configs).toEqual(helloConfig);
    fs.unlinkSync(jsonConfigFilePath);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVpcmUtZmlsZS1wYXJzZS50ZXN0LmpzIl0sIm5hbWVzIjpbImpvaW4iLCJyZXF1aXJlIiwiZnMiLCJwYXRoIiwiZmlsZVBhcnNlIiwicmVtb3ZlRGlyIiwiZ2V0Q29uZmlnRGlyIiwicHJlZml4IiwiZGlyIiwicHJvY2VzcyIsImN3ZCIsImNvbmZpZ0RpciIsInJlc29sdmUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwidGVzdENvbmZpZ0RpciIsImRlc2NyaWJlIiwiYWZ0ZXJBbGwiLCJ0ZXN0IiwiZmlsZVBhdGgiLCJyZXNwIiwiZXhwZWN0IiwidG9CZURlZmluZWQiLCJ0b0JlIiwianNvbkNvbmZpZ0ZpbGVQYXRoIiwiaGVsbG9Db25maWciLCJuYW1lIiwid3JpdGVGaWxlU3luYyIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb25maWdzIiwidG9FcXVhbCIsInVubGlua1N5bmMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07QUFBRUEsRUFBQUE7QUFBRixJQUFXQyxPQUFPLENBQUMsTUFBRCxDQUF4Qjs7QUFDQSxNQUFNQyxFQUFFLEdBQUdELE9BQU8sQ0FBQyxJQUFELENBQWxCOztBQUNBLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsTUFBTUcsU0FBUyxHQUFHSCxPQUFPLENBQUMsdUJBQUQsQ0FBekI7O0FBQ0EsTUFBTTtBQUFFSSxFQUFBQTtBQUFGLElBQWdCSixPQUFPLENBQUMsdUJBQUQsQ0FBN0I7O0FBRUEsTUFBTUssWUFBWSxHQUFJQyxNQUFELElBQVk7QUFDL0IsUUFBTUMsR0FBRyxHQUFHQyxPQUFPLENBQUNDLEdBQVIsRUFBWjtBQUNBLFFBQU1DLFNBQVMsR0FBR1IsSUFBSSxDQUFDUyxPQUFMLENBQWFKLEdBQWIsRUFBa0JELE1BQU0sR0FBSSxHQUFFQSxNQUFPLFNBQWIsR0FBd0IsUUFBaEQsQ0FBbEI7O0FBQ0EsTUFBSSxDQUFDTCxFQUFFLENBQUNXLFVBQUgsQ0FBY0YsU0FBZCxDQUFMLEVBQStCO0FBQzdCVCxJQUFBQSxFQUFFLENBQUNZLFNBQUgsQ0FBYUgsU0FBYjtBQUNEOztBQUVELFNBQU9BLFNBQVA7QUFDRCxDQVJEOztBQVVBLE1BQU1JLGFBQWEsR0FBR1QsWUFBWSxDQUFDLHlCQUFELENBQWxDO0FBRUFVLFFBQVEsQ0FBQyxZQUFELEVBQWUsTUFBTTtBQUMzQixRQUFNUixHQUFHLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixFQUFaO0FBQ0FPLEVBQUFBLFFBQVEsQ0FBQyxNQUFNO0FBQ2JaLElBQUFBLFNBQVMsQ0FBQ1UsYUFBRCxDQUFUO0FBQ0QsR0FGTyxDQUFSO0FBR0FHLEVBQUFBLElBQUksQ0FBQyw0QkFBRCxFQUErQixNQUFNO0FBQ3ZDLFVBQU1DLFFBQVEsR0FBR25CLElBQUksQ0FBQ1EsR0FBRCxFQUFNLFFBQU4sRUFBZ0IsYUFBaEIsQ0FBckI7QUFDQSxVQUFNWSxJQUFJLEdBQUdoQixTQUFTLENBQUNlLFFBQUQsQ0FBdEI7QUFDQUUsSUFBQUEsTUFBTSxDQUFDRCxJQUFELENBQU4sQ0FBYUUsV0FBYjtBQUNBRCxJQUFBQSxNQUFNLENBQUMsT0FBT0QsSUFBUixDQUFOLENBQW9CRyxJQUFwQixDQUF5QixVQUF6QjtBQUNELEdBTEcsQ0FBSjtBQU9BTCxFQUFBQSxJQUFJLENBQUMsb0NBQUQsRUFBdUMsTUFBTTtBQUMvQyxVQUFNQyxRQUFRLEdBQUduQixJQUFJLENBQUNRLEdBQUQsRUFBTSxVQUFOLEVBQWtCLHFCQUFsQixDQUFyQjtBQUNBLFVBQU1ZLElBQUksR0FBR2hCLFNBQVMsQ0FBQ2UsUUFBRCxDQUF0QjtBQUNBRSxJQUFBQSxNQUFNLENBQUNELElBQUQsQ0FBTixDQUFhRSxXQUFiO0FBQ0FELElBQUFBLE1BQU0sQ0FBQyxPQUFPRCxJQUFSLENBQU4sQ0FBb0JHLElBQXBCLENBQXlCLFFBQXpCO0FBQ0QsR0FMRyxDQUFKO0FBT0FMLEVBQUFBLElBQUksQ0FBQywwQkFBRCxFQUE2QixNQUFNO0FBQ3JDLFVBQU1NLGtCQUFrQixHQUFHckIsSUFBSSxDQUFDSCxJQUFMLENBQVVlLGFBQVYsRUFBeUIsWUFBekIsQ0FBM0I7QUFDQSxVQUFNVSxXQUFXLEdBQUc7QUFBRUMsTUFBQUEsSUFBSSxFQUFFO0FBQVIsS0FBcEI7QUFDQXhCLElBQUFBLEVBQUUsQ0FBQ3lCLGFBQUgsQ0FBaUJILGtCQUFqQixFQUFxQ0ksSUFBSSxDQUFDQyxTQUFMLENBQWVKLFdBQWYsQ0FBckM7QUFDQSxVQUFNSyxPQUFPLEdBQUcxQixTQUFTLENBQUNvQixrQkFBRCxDQUF6QjtBQUNBSCxJQUFBQSxNQUFNLENBQUNTLE9BQUQsQ0FBTixDQUFnQkMsT0FBaEIsQ0FBd0JOLFdBQXhCO0FBQ0F2QixJQUFBQSxFQUFFLENBQUM4QixVQUFILENBQWNSLGtCQUFkO0FBQ0QsR0FQRyxDQUFKO0FBUUQsQ0EzQk8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgam9pbiB9ID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGZpbGVQYXJzZSA9IHJlcXVpcmUoJy4uL3JlcXVpcmUtZmlsZS1wYXJzZScpO1xuY29uc3QgeyByZW1vdmVEaXIgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3Rlc3RzL2hlbHBlcicpO1xuXG5jb25zdCBnZXRDb25maWdEaXIgPSAocHJlZml4KSA9PiB7XG4gIGNvbnN0IGRpciA9IHByb2Nlc3MuY3dkKCk7XG4gIGNvbnN0IGNvbmZpZ0RpciA9IHBhdGgucmVzb2x2ZShkaXIsIHByZWZpeCA/IGAke3ByZWZpeH0tY29uZmlnYCA6ICdjb25maWcnKTtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKGNvbmZpZ0RpcikpIHtcbiAgICBmcy5ta2RpclN5bmMoY29uZmlnRGlyKTtcbiAgfVxuXG4gIHJldHVybiBjb25maWdEaXI7XG59O1xuXG5jb25zdCB0ZXN0Q29uZmlnRGlyID0gZ2V0Q29uZmlnRGlyKCd0ZXN0LXJlcXVpcmUtZmlsZS1wYXJzZScpO1xuXG5kZXNjcmliZSgnRmlsZSBwYXJzZScsICgpID0+IHtcbiAgY29uc3QgZGlyID0gcHJvY2Vzcy5jd2QoKTtcbiAgYWZ0ZXJBbGwoKCkgPT4ge1xuICAgIHJlbW92ZURpcih0ZXN0Q29uZmlnRGlyKTtcbiAgfSk7XG4gIHRlc3QoJ1Nob3VsZCByZXF1aXJlIGRhdGFiYXNlLmpzJywgKCkgPT4ge1xuICAgIGNvbnN0IGZpbGVQYXRoID0gam9pbihkaXIsICdjb25maWcnLCAnZGF0YWJhc2UuanMnKTtcbiAgICBjb25zdCByZXNwID0gZmlsZVBhcnNlKGZpbGVQYXRoKTtcbiAgICBleHBlY3QocmVzcCkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QodHlwZW9mIHJlc3ApLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ1Nob3VsZCByZXF1aXJlIHNlcnZpY2VhY2NvdW50Lmpzb24nLCAoKSA9PiB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBqb2luKGRpciwgJ2ZpcmViYXNlJywgJ3NlcnZpY2VhY2NvdW50Lmpzb24nKTtcbiAgICBjb25zdCByZXNwID0gZmlsZVBhcnNlKGZpbGVQYXRoKTtcbiAgICBleHBlY3QocmVzcCkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QodHlwZW9mIHJlc3ApLnRvQmUoJ29iamVjdCcpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgcmVxdWlyZSBqc29uIGZpbGUnLCAoKSA9PiB7XG4gICAgY29uc3QganNvbkNvbmZpZ0ZpbGVQYXRoID0gcGF0aC5qb2luKHRlc3RDb25maWdEaXIsICdoZWxsby5qc29uJyk7XG4gICAgY29uc3QgaGVsbG9Db25maWcgPSB7IG5hbWU6ICd3b3JsZCcgfTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKGpzb25Db25maWdGaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkoaGVsbG9Db25maWcpKTtcbiAgICBjb25zdCBjb25maWdzID0gZmlsZVBhcnNlKGpzb25Db25maWdGaWxlUGF0aCk7XG4gICAgZXhwZWN0KGNvbmZpZ3MpLnRvRXF1YWwoaGVsbG9Db25maWcpO1xuICAgIGZzLnVubGlua1N5bmMoanNvbkNvbmZpZ0ZpbGVQYXRoKTtcbiAgfSk7XG59KTtcbiJdfQ==