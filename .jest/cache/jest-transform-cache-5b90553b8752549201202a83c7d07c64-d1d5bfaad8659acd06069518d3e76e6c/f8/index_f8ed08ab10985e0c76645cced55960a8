c8803cd593979ee5dcae4a297defa410
const HttpStatusCode = require('http-status-code');

const {
  FORBIDDEN,
  INTERNAL_ERROR,
  UN_AUTHORIZED,
  INVALID_TOKEN,
  SERVICE_NOT_FOUND,
  REQUEST_SKIPPED,
  REQUEST_REJECTED,
  REQUEST_TIMEOUT,
  VALIDATION_ERROR,
  BAD_REQUEST
} = require('../constants');

const getHttpMsg = statusCode => HttpStatusCode.getMessage(statusCode);

const getAnyMsg = (anyMsg, statusCode = 400) => {
  let message = anyMsg;

  if (typeof anyMsg === 'object') {
    message = anyMsg.message || getHttpMsg(statusCode);
  }

  return !!message ? message : getHttpMsg(statusCode);
};

const resStatus = (res, options = {
  type: INTERNAL_ERROR,
  statusCode: 500,
  message: getHttpMsg(500)
}) => {
  const {
    type,
    statusCode,
    message
  } = options;
  res.status(statusCode).json({
    message,
    type,
    statusCode
  });
  return {
    headersSent: true
  };
};

const internalError = res => resStatus(res);

const forbidden = res => resStatus(res, {
  type: FORBIDDEN,
  statusCode: 403,
  message: getHttpMsg(403)
});

const unAuthorized = res => resStatus(res, {
  type: UN_AUTHORIZED,
  statusCode: 401,
  message: getHttpMsg(401)
});

const invalidToken = res => resStatus(res, {
  type: INVALID_TOKEN,
  statusCode: 401,
  message: getHttpMsg(401)
});

const serviceNotFound = res => resStatus(res, {
  type: SERVICE_NOT_FOUND,
  statusCode: 404,
  message: getHttpMsg(404)
});

const requestTimeout = res => resStatus(res, {
  type: REQUEST_TIMEOUT,
  statusCode: 504,
  message: getHttpMsg(504)
});

const requestSkipped = res => resStatus(res, {
  type: REQUEST_SKIPPED,
  statusCode: 514,
  message: getHttpMsg(514)
});

const requestRejected = res => resStatus(res, {
  type: REQUEST_REJECTED,
  statusCode: 503,
  message: getHttpMsg(503)
});

const validationError = (res, options) => resStatus(res, {
  type: VALIDATION_ERROR,
  statusCode: 422,
  message: getAnyMsg(options, 422)
});

const badRequest = (res, options) => resStatus(res, {
  type: BAD_REQUEST,
  statusCode: 400,
  message: getAnyMsg(options)
});

const retryAbleError = (res, options) => resStatus(res, {
  type: options.type || INTERNAL_ERROR,
  statusCode: options.statusCode || 500,
  message: options.message || getHttpMsg(500)
});

module.exports = {
  invalidToken,
  internalError,
  requestRejected,
  requestSkipped,
  validationError,
  retryAbleError,
  serviceNotFound,
  requestTimeout,
  forbidden,
  unAuthorized,
  badRequest
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkh0dHBTdGF0dXNDb2RlIiwicmVxdWlyZSIsIkZPUkJJRERFTiIsIklOVEVSTkFMX0VSUk9SIiwiVU5fQVVUSE9SSVpFRCIsIklOVkFMSURfVE9LRU4iLCJTRVJWSUNFX05PVF9GT1VORCIsIlJFUVVFU1RfU0tJUFBFRCIsIlJFUVVFU1RfUkVKRUNURUQiLCJSRVFVRVNUX1RJTUVPVVQiLCJWQUxJREFUSU9OX0VSUk9SIiwiQkFEX1JFUVVFU1QiLCJnZXRIdHRwTXNnIiwic3RhdHVzQ29kZSIsImdldE1lc3NhZ2UiLCJnZXRBbnlNc2ciLCJhbnlNc2ciLCJtZXNzYWdlIiwicmVzU3RhdHVzIiwicmVzIiwib3B0aW9ucyIsInR5cGUiLCJzdGF0dXMiLCJqc29uIiwiaGVhZGVyc1NlbnQiLCJpbnRlcm5hbEVycm9yIiwiZm9yYmlkZGVuIiwidW5BdXRob3JpemVkIiwiaW52YWxpZFRva2VuIiwic2VydmljZU5vdEZvdW5kIiwicmVxdWVzdFRpbWVvdXQiLCJyZXF1ZXN0U2tpcHBlZCIsInJlcXVlc3RSZWplY3RlZCIsInZhbGlkYXRpb25FcnJvciIsImJhZFJlcXVlc3QiLCJyZXRyeUFibGVFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGNBQWMsR0FBR0MsT0FBTyxDQUFDLGtCQUFELENBQTlCOztBQUNBLE1BQU07QUFDSkMsRUFBQUEsU0FESTtBQUVKQyxFQUFBQSxjQUZJO0FBR0pDLEVBQUFBLGFBSEk7QUFJSkMsRUFBQUEsYUFKSTtBQUtKQyxFQUFBQSxpQkFMSTtBQU1KQyxFQUFBQSxlQU5JO0FBT0pDLEVBQUFBLGdCQVBJO0FBUUpDLEVBQUFBLGVBUkk7QUFTSkMsRUFBQUEsZ0JBVEk7QUFVSkMsRUFBQUE7QUFWSSxJQVdGVixPQUFPLENBQUMsY0FBRCxDQVhYOztBQWFBLE1BQU1XLFVBQVUsR0FBSUMsVUFBRCxJQUFnQmIsY0FBYyxDQUFDYyxVQUFmLENBQTBCRCxVQUEx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QUFBLGNBUmU7QUFTZkosRUFBQUEsU0FUZTtBQVVmQyxFQUFBQSxZQVZlO0FBV2ZPLEVBQUFBO0FBWGUsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBIdHRwU3RhdHVzQ29kZSA9IHJlcXVpcmUoJ2h0dHAtc3RhdHVzLWNvZGUnKTtcbmNvbnN0IHtcbiAgRk9SQklEREVOLFxuICBJTlRFUk5BTF9FUlJPUixcbiAgVU5fQVVUSE9SSVpFRCxcbiAgSU5WQUxJRF9UT0tFTixcbiAgU0VSVklDRV9OT1RfRk9VTkQsXG4gIFJFUVVFU1RfU0tJUFBFRCxcbiAgUkVRVUVTVF9SRUpFQ1RFRCxcbiAgUkVRVUVTVF9USU1FT1VULFxuICBWQUxJREFUSU9OX0VSUk9SLFxuICBCQURfUkVRVUVTVCxcbn0gPSByZXF1aXJlKCcuLi9jb25zdGFudHMnKTtcblxuY29uc3QgZ2V0SHR0cE1zZyA9IChzdGF0dXNDb2RlKSA9PiBIdHRwU3RhdHVzQ29kZS5nZXRNZXNzYWdlKHN0YXR1c0NvZGUpO1xuXG5jb25zdCBnZXRBbnlNc2cgPSAoYW55TXNnLCBzdGF0dXNDb2RlID0gNDAwKSA9PiB7XG4gIGxldCBtZXNzYWdlID0gYW55TXNnO1xuICBpZiAodHlwZW9mIGFueU1zZyA9PT0gJ29iamVjdCcpIHtcbiAgICBtZXNzYWdlID0gYW55TXNnLm1lc3NhZ2UgfHwgZ2V0SHR0cE1zZyhzdGF0dXNDb2RlKTtcbiAgfVxuICByZXR1cm4gISFtZXNzYWdlID8gbWVzc2FnZSA6IGdldEh0dHBNc2coc3RhdHVzQ29kZSk7XG59O1xuXG5jb25zdCByZXNTdGF0dXMgPSAoXG4gIHJlcyxcbiAgb3B0aW9ucyA9IHsgdHlwZTogSU5URVJOQUxfRVJST1IsIHN0YXR1c0NvZGU6IDUwMCwgbWVzc2FnZTogZ2V0SHR0cE1zZyg1MDApIH1cbikgPT4ge1xuICBjb25zdCB7IHR5cGUsIHN0YXR1c0NvZGUsIG1lc3NhZ2UgfSA9IG9wdGlvbnM7XG4gIHJlcy5zdGF0dXMoc3RhdHVzQ29kZSkuanNvbih7XG4gICAgbWVzc2FnZSxcbiAgICB0eXBlLFxuICAgIHN0YXR1c0NvZGUsXG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGhlYWRlcnNTZW50OiB0cnVlLFxuICB9O1xufTtcblxuY29uc3QgaW50ZXJuYWxFcnJvciA9IChyZXMpID0+IHJlc1N0YXR1cyhyZXMpO1xuXG5jb25zdCBmb3JiaWRkZW4gPSAocmVzKSA9PlxuICByZXNTdGF0dXMocmVzLCB7XG4gICAgdHlwZTogRk9SQklEREVOLFxuICAgIHN0YXR1c0NvZGU6IDQwMyxcbiAgICBtZXNzYWdlOiBnZXRIdHRwTXNnKDQwMyksXG4gIH0pO1xuXG5jb25zdCB1bkF1dGhvcml6ZWQgPSAocmVzKSA9PlxuICByZXNTdGF0dXMocmVzLCB7XG4gICAgdHlwZTogVU5fQVVUSE9SSVpFRCxcbiAgICBzdGF0dXNDb2RlOiA0MDEsXG4gICAgbWVzc2FnZTogZ2V0SHR0cE1zZyg0MDEpLFxuICB9KTtcblxuY29uc3QgaW52YWxpZFRva2VuID0gKHJlcykgPT5cbiAgcmVzU3RhdHVzKHJlcywge1xuICAgIHR5cGU6IElOVkFMSURfVE9LRU4sXG4gICAgc3RhdHVzQ29kZTogNDAxLFxuICAgIG1lc3NhZ2U6IGdldEh0dHBNc2coNDAxKSxcbiAgfSk7XG5cbmNvbnN0IHNlcnZpY2VOb3RGb3VuZCA9IChyZXMpID0+XG4gIHJlc1N0YXR1cyhyZXMsIHtcbiAgICB0eXBlOiBTRVJWSUNFX05PVF9GT1VORCxcbiAgICBzdGF0dXNDb2RlOiA0MDQsXG4gICAgbWVzc2FnZTogZ2V0SHR0cE1zZyg0MDQpLFxuICB9KTtcblxuY29uc3QgcmVxdWVzdFRpbWVvdXQgPSAocmVzKSA9PlxuICByZXNTdGF0dXMocmVzLCB7XG4gICAgdHlwZTogUkVRVUVTVF9USU1FT1VULFxuICAgIHN0YXR1c0NvZGU6IDUwNCxcbiAgICBtZXNzYWdlOiBnZXRIdHRwTXNnKDUwNCksXG4gIH0pO1xuXG5jb25zdCByZXF1ZXN0U2tpcHBlZCA9IChyZXMpID0+XG4gIHJlc1N0YXR1cyhyZXMsIHtcbiAgICB0eXBlOiBSRVFVRVNUX1NLSVBQRUQsXG4gICAgc3RhdHVzQ29kZTogNTE0LFxuICAgIG1lc3NhZ2U6IGdldEh0dHBNc2coNTE0KSxcbiAgfSk7XG5cbmNvbnN0IHJlcXVlc3RSZWplY3RlZCA9IChyZXMpID0+XG4gIHJlc1N0YXR1cyhyZXMsIHtcbiAgICB0eXBlOiBSRVFVRVNUX1JFSkVDVEVELFxuICAgIHN0YXR1c0NvZGU6IDUwMyxcbiAgICBtZXNzYWdlOiBnZXRIdHRwTXNnKDUwMyksXG4gIH0pO1xuXG5jb25zdCB2YWxpZGF0aW9uRXJyb3IgPSAocmVzLCBvcHRpb25zKSA9PlxuICByZXNTdGF0dXMocmVzLCB7XG4gICAgdHlwZTogVkFMSURBVElPTl9FUlJPUixcbiAgICBzdGF0dXNDb2RlOiA0MjIsXG4gICAgbWVzc2FnZTogZ2V0QW55TXNnKG9wdGlvbnMsIDQyMiksXG4gIH0pO1xuXG5jb25zdCBiYWRSZXF1ZXN0ID0gKHJlcywgb3B0aW9ucykgPT5cbiAgcmVzU3RhdHVzKHJlcywge1xuICAgIHR5cGU6IEJBRF9SRVFVRVNULFxuICAgIHN0YXR1c0NvZGU6IDQwMCxcbiAgICBtZXNzYWdlOiBnZXRBbnlNc2cob3B0aW9ucyksXG4gIH0pO1xuXG5jb25zdCByZXRyeUFibGVFcnJvciA9IChyZXMsIG9wdGlvbnMpID0+XG4gIHJlc1N0YXR1cyhyZXMsIHtcbiAgICB0eXBlOiBvcHRpb25zLnR5cGUgfHwgSU5URVJOQUxfRVJST1IsXG4gICAgc3RhdHVzQ29kZTogb3B0aW9ucy5zdGF0dXNDb2RlIHx8IDUwMCxcbiAgICBtZXNzYWdlOiBvcHRpb25zLm1lc3NhZ2UgfHwgZ2V0SHR0cE1zZyg1MDApLFxuICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGludmFsaWRUb2tlbixcbiAgaW50ZXJuYWxFcnJvcixcbiAgcmVxdWVzdFJlamVjdGVkLFxuICByZXF1ZXN0U2tpcHBlZCxcbiAgdmFsaWRhdGlvbkVycm9yLFxuICByZXRyeUFibGVFcnJvcixcbiAgc2VydmljZU5vdEZvdW5kLFxuICByZXF1ZXN0VGltZW91dCxcbiAgZm9yYmlkZGVuLFxuICB1bkF1dGhvcml6ZWQsXG4gIGJhZFJlcXVlc3QsXG59O1xuIl19