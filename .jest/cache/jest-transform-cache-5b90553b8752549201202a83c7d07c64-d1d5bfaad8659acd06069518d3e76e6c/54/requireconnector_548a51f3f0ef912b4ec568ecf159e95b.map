{"version":3,"sources":["require-connector.js"],"names":["path","require","VError","module","exports","requireConnector","connector","sgApp","log","debug","name","connectorPath","resolve","__dirname","error","cause"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;AAEA;AACA;AACA;AACA;AACA;;;AACAE,MAAM,CAACC,OAAP,GAAiB,SAASC,gBAAT,CAA0BC,SAA1B,EAAqC;AACpDC,EAAAA,KAAK,CAACC,GAAN,CAAUC,KAAV,CAAiB,cAAaH,SAAU,EAAxC;;AACA,MAAI,CAACA,SAAL,EAAgB;AACd,UAAM,IAAIJ,MAAJ,CACJ;AAAEQ,MAAAA,IAAI,EAAE;AAAR,KADI,EAEJ,mCAFI,CAAN;AAID;;AAED,MAAI;AACF;AACA,UAAMC,aAAa,GAAGX,IAAI,CAACY,OAAL,CAAaC,SAAb,EAAwB,WAAxB,EAAqCP,SAArC,CAAtB;AACA,WAAOL,OAAO,CAACU,aAAD,CAAd;AACD,GAJD,CAIE,OAAOG,KAAP,EAAc;AACd,UAAM,IAAIZ,MAAJ,CACJ;AAAEQ,MAAAA,IAAI,EAAE,gBAAR;AAA0BK,MAAAA,KAAK,EAAED;AAAjC,KADI,EAEJ,2BAFI,EAGJR,SAHI,CAAN;AAKD;AACF,CApBD","sourcesContent":["const path = require('path');\nconst VError = require('verror');\n\n/**\n * Requires a database connector\n * @param {string} connector connector name\n * @param {DatabaseManager} databaseManager reference to the database manager\n */\nmodule.exports = function requireConnector(connector) {\n  sgApp.log.debug(`connector: ${connector}`);\n  if (!connector) {\n    throw new VError(\n      { name: 'ConnectorError' },\n      'initialize connector without name'\n    );\n  }\n\n  try {\n    // return require(`sgapp-connector-${connector}`);\n    const connectorPath = path.resolve(__dirname, 'connector', connector);\n    return require(connectorPath);\n  } catch (error) {\n    throw new VError(\n      { name: 'ConnectorError', cause: error },\n      'initialize connector \"%s\"',\n      connector\n    );\n  }\n};\n"]}